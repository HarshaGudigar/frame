# ──────────────────────────────────────────────────────────────
# Alyxnet Frame — Backend Environment Variables
# Copy this file to .env and fill in the values.
# ──────────────────────────────────────────────────────────────

# ─── Server ───────────────────────────────────────────────────
PORT=5000                                          # [Optional] Default: 5000
NODE_ENV=development                               # [Optional] development | production | test
MONGODB_URI=mongodb://localhost:27017/mern-app     # [Optional] Default: mongodb://localhost:27017/mern-app

# ─── Auth ─────────────────────────────────────────────────────
JWT_SECRET=                                        # [REQUIRED] Secret key for signing access tokens
JWT_EXPIRY=15m                                     # [Optional] Access token lifetime. Default: 15m
REFRESH_TOKEN_SECRET=                              # [Optional] Separate secret for refresh tokens. Default: falls back to JWT_SECRET
REFRESH_TOKEN_EXPIRY=7d                            # [Optional] Refresh token lifetime. Default: 7d

# ─── Fleet Manager ────────────────────────────────────────────
HEARTBEAT_SECRET=                                  # [REQUIRED] API key for silo-to-hub heartbeat authentication

# ─── Email (Resend) ──────────────────────────────────────────
RESEND_API_KEY=                                    # [REQUIRED] Resend API key (re_...)
APP_URL=http://localhost:5173                      # [Optional] Frontend URL for email links. Default: http://localhost:5173
EMAIL_FROM=Alyxnet Frame <noreply@yourdomain.com>  # [Optional] Sender address. Default: Alyxnet Frame <noreply@yourdomain.com>

# ─── CORS ─────────────────────────────────────────────────────
CORS_ORIGINS=http://localhost:5173,http://localhost:3000  # [Optional] Comma-separated allowed origins

# ─── Rate Limiting ────────────────────────────────────────────
RATE_LIMIT_WINDOW_MS=900000                        # [Optional] Global window in ms. Default: 900000 (15 min)
RATE_LIMIT_MAX_AUTH=20                             # [Optional] Max auth requests per window. Default: 20 (prod) / 1000 (dev)
RATE_LIMIT_LOGIN_WINDOW_MS=900000                  # [Optional] Login window in ms. Default: 900000
RATE_LIMIT_LOGIN_MAX=10                            # [Optional] Max login attempts per window. Default: 10 (prod) / 1000 (dev)
RATE_LIMIT_REGISTER_WINDOW_MS=900000               # [Optional] Register window in ms. Default: 900000
RATE_LIMIT_REGISTER_MAX=5                          # [Optional] Max register attempts per window. Default: 5 (prod) / 1000 (dev)
RATE_LIMIT_FORGOT_PW_WINDOW_MS=900000              # [Optional] Forgot-password window in ms. Default: 900000
RATE_LIMIT_FORGOT_PW_MAX=5                         # [Optional] Max forgot-password attempts per window. Default: 5 (prod) / 1000 (dev)
BODY_SIZE_LIMIT=10kb                               # [Optional] Max request body size. Default: 10kb

# ─── Logging ──────────────────────────────────────────────────
LOG_LEVEL=info                                     # [Optional] pino log level. Default: info

# ─── Backup ───────────────────────────────────────────────────
BACKUP_ENABLED=false                               # [Optional] Enable automated backups. Default: false
BACKUP_PROVIDER=local                              # [Optional] local | s3 | gdrive. Default: local
BACKUP_CRON=0 2 * * *                              # [Optional] Cron schedule for backups. Default: 02:00 UTC
BACKUP_RETENTION_DAYS=7                            # [Optional] Days to keep backups. Default: 7
BACKUP_DIR=/backups                                # [Optional] Local backup directory. Default: /backups

# ─── Backup — S3 ─────────────────────────────────────────────
BACKUP_S3_BUCKET=                                  # [Conditional] Required if BACKUP_PROVIDER=s3
BACKUP_S3_REGION=us-east-1                         # [Optional] AWS region. Default: us-east-1
BACKUP_S3_PREFIX=backups/                           # [Optional] S3 key prefix. Default: backups/

# ─── Backup — Google Drive ────────────────────────────────────
BACKUP_GDRIVE_FOLDER_ID=                           # [Conditional] Required if BACKUP_PROVIDER=gdrive
BACKUP_GDRIVE_SERVICE_ACCOUNT_EMAIL=               # [Conditional] Required if BACKUP_PROVIDER=gdrive
BACKUP_GDRIVE_PRIVATE_KEY=                         # [Conditional] Required if BACKUP_PROVIDER=gdrive

# ─── Multi-Tenancy ────────────────────────────────────────────
# Set APP_TENANT_ID to run in SILO mode (dedicated tenant instance).
# Leave unset for HUB mode (central control plane).
APP_TENANT_ID=                                     # [Conditional] Tenant slug — set for SILO mode, leave empty for HUB mode
APP_TENANT_NAME=                                   # [Conditional] Display name for the tenant (SILO mode only)
APP_SUBSCRIBED_MODULES=                            # [Conditional] Comma-separated module slugs (SILO mode only)
