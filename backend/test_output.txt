
> backend@1.0.0 test
> jest --runInBand tests/auth.test.js

FAIL tests/auth.test.js
  POST /api/auth/register
    âˆš should register a new user and return access + refresh tokens (367 ms)
  POST /api/auth/login
    âˆš should login and return access + refresh tokens (487 ms)
  POST /api/auth/refresh-token
    Ã— should refresh token pair with valid refresh token (273 ms)
    âˆš should reject invalid refresh token (256 ms)
    âˆš should reject reused (revoked) refresh token (274 ms)
  POST /api/auth/logout
    âˆš should revoke refresh token on logout (259 ms)
    âˆš should not allow refresh after logout (265 ms)

  â— POST /api/auth/refresh-token â€º should refresh token pair with valid refresh token

    expect(received).not.toBe(expected) // Object.is equality

    Expected: not "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2OTkwNWVlOWYwNjIwMDNkMzgxY2Y3Y2MiLCJlbWFpbCI6ImJvYkBleGFtcGxlLmNvbSIsInJvbGUiOiJ1c2VyIiwidGVuYW50cyI6W10sImlhdCI6MTc3MTA2OTE2MSwiZXhwIjoxNzcxMDcwMDYxfQ.moDz2l12HwYy4D-m_jZWWyye6lKGY_UAlef203qFnFs"

    [0m [90m 82 |[39m         expect(res[33m.[39mbody[33m.[39mdata[33m.[39maccessToken)[33m.[39mtoBeDefined()[33m;[39m
     [90m 83 |[39m         expect(res[33m.[39mbody[33m.[39mdata[33m.[39mrefreshToken)[33m.[39mtoBeDefined()[33m;[39m
    [31m[1m>[22m[39m[90m 84 |[39m         expect(res[33m.[39mbody[33m.[39mdata[33m.[39maccessToken)[33m.[39mnot[33m.[39mtoBe(accessToken)[33m;[39m
     [90m    |[39m                                               [31m[1m^[22m[39m
     [90m 85 |[39m         expect(res[33m.[39mbody[33m.[39mdata[33m.[39mrefreshToken)[33m.[39mnot[33m.[39mtoBe(refreshToken)[33m;[39m
     [90m 86 |[39m
     [90m 87 |[39m         [90m// Verify old token is revoked[39m[0m

      at Object.toBe (tests/auth.test.js:84:47)

Test Suites: 1 failed, 1 total
Tests:       1 failed, 6 passed, 7 total
Snapshots:   0 total
Time:        3.661 s, estimated 4 s
Ran all test suites matching tests/auth.test.js.
